(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/my"],{"0e93":function(e,n,t){"use strict";(function(e,n){var u=t("4ea4");t("9b8f");u(t("66fd"));var l=u(t("39a8"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(l.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"1b65":function(e,n,t){"use strict";var u=t("2162"),l=t.n(u);l.a},2162:function(e,n,t){},"39a8":function(e,n,t){"use strict";t.r(n);var u=t("df5c"),l=t("c323");for(var i in l)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return l[e]}))}(i);t("1b65");var c=t("f0c5"),o=Object(c["a"])(l["default"],u["b"],u["c"],!1,null,null,null,!1,u["a"],void 0);n["default"]=o.exports},c323:function(e,n,t){"use strict";t.r(n);var u=t("d32a"),l=t.n(u);for(var i in u)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(i);n["default"]=l.a},d32a:function(e,n,t){"use strict";(function(e){var u=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=u(t("2eee")),i=u(t("c973")),c=u(t("18dd")),o={data:function(){return{tabslist:[],menulist:[],smallmenulist:[],islogin:!1,userInfo:null,collect:null,isshowmore:!1,value1:0,isvip:!1,curtabsmenu:0}},methods:{dologin:function(){var n=this;return(0,i.default)(l.default.mark((function t(){var u,o;return l.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c.default.islogin()){t.next=7;break}return t.next=3,c.default.getuserinfo();case 3:n.userInfo=t.sent,console.log("111getuserinfo",n.userInfo),t.next=10;break;case 7:u=new Promise((function(n,t){e.getUserProfile({desc:"微信登录",success:function(e){n(e)},fail:function(e){t(e)}})})),o=new Promise((function(n,t){e.login({success:function(e){n(e)},fail:function(e){t(e)}})})),u.then((function(e){o.then((function(t){n.$service.loginService.wxLogin({code:t.code,appId:"wxe15e38290cf35d4e",appSecret:"11ad6a08e492439b5bc157738c2c55c2"}).then((function(t){c.default.setToken(t.token),c.default.setUserInfo(e.userInfo),n.$service.loginService.auth({token:t.token,avatarUrl:e.userInfo.avatarUrl,nickName:e.userInfo.nickName,gender:e.userInfo.gender,province:e.userInfo.province}).then(function(){var e=(0,i.default)(l.default.mark((function e(t){return l.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("updateUserInfo",t),200!=t.code){e.next=10;break}return e.next=4,c.default.getuserinfo();case 4:return n.userInfo=e.sent,e.next=7,c.default.getUserCollect();case 7:n.collect=e.sent,console.log("000userInfo",n.userInfo,n.collect),n.collect&&(n.tabslist=n.collect,n.menulist=n.collect[0].ingredient,n.smallmenulist=n.menulist.slice(0,5),console.log("000",n.menulist,n.smallmenulist,n.tabslist));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))}))}));case 10:case"end":return t.stop()}}),t)})))()},godetial:function(n){e.navigateTo({url:"/pages/detials/detials?id=".concat(n._id,"&type=",3)})},gomember:function(){this.islogin&&e.navigateTo({url:"/pages/buymember/buymember?type=1"})},changemenu:function(e){e&&(this.curtabsmenu=e.index,this.menulist=e.ingredient,this.smallmenulist=this.menulist.slice(0,5))},click1:function(e){var n=this;return(0,i.default)(l.default.mark((function t(){return l.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.value1=e,n.curtabsmenu=0,0!=e){t.next=9;break}return t.next=5,c.default.getUserCollect();case 5:n.collect=t.sent,n.collect&&(n.tabslist=n.collect,n.menulist=n.collect[0].ingredient,n.smallmenulist=n.menulist.slice(0,5)),t.next=18;break;case 9:if(1!=e){t.next=13;break}n.$service.userService.getrecord({_id:n.userInfo._id}).then((function(e){console.log("getrecord",e),200==e.meta.status?(n.tabslist=e.record,n.menulist=e.record[0].ingredient,n.smallmenulist=n.menulist.slice(0,5)):(n.tabslist=null,n.collect=null)})),t.next=18;break;case 13:if(2!=e){t.next=18;break}return t.next=16,c.default.getUserCollect();case 16:n.collect=t.sent,n.collect&&(n.tabslist=n.collect,n.menulist=n.collect[0].ingredient,n.smallmenulist=n.menulist.slice(0,5));case 18:case"end":return t.stop()}}),t)})))()}},onShow:function(){var e=this;return(0,i.default)(l.default.mark((function n(){return l.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!c.default.islogin()){n.next=10;break}return e.islogin=!0,n.next=4,c.default.getuserinfo();case 4:return e.userInfo=n.sent,e.userInfo.vip&&(e.isvip=!0),n.next=8,c.default.getUserCollect();case 8:e.collect=n.sent,e.collect&&(e.tabslist=e.collect,e.menulist=e.collect[0].ingredient,e.smallmenulist=e.menulist.slice(0,5));case 10:case"end":return n.stop()}}),n)})))()}};n.default=o}).call(this,t("543d")["default"])},df5c:function(e,n,t){"use strict";t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return u}));var u={uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"8a3e"))},mybg:function(){return t.e("components/mybg/mybg").then(t.bind(null,"06bb"))},uTabbar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-tabbar/u-tabbar")]).then(t.bind(null,"38cc"))},uTabbarItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-tabbar-item/u-tabbar-item")]).then(t.bind(null,"0739"))},mycard:function(){return t.e("components/mycard/mycard").then(t.bind(null,"ce3c"))},mytabspersonal:function(){return t.e("components/mytabspersonal/mytabspersonal").then(t.bind(null,"1005"))},mytable:function(){return t.e("components/mytable/mytable").then(t.bind(null,"9986"))},myscroll:function(){return t.e("components/myscroll/myscroll").then(t.bind(null,"3a35"))},mymenuitem:function(){return t.e("components/mymenuitem/mymenuitem").then(t.bind(null,"c618"))}},l=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isshowmore=!0},e.e1=function(n){e.isshowmore=!1})},i=[]}},[["0e93","common/runtime","common/vendor"]]]);